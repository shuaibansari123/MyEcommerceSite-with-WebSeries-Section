


{% extends 'shop/basic.html' %}
{% load static %}
{% block css %}
<style>





.col-md-3
{
display: inline-block;
margin-left:-22px;
}
.carousel-indicators .active {
background-color: blue;
}
.col-md-3 img{
  margin-top:5px;
width: 32S0px;
height: 250px;

}
.carousel-indicators li{
background-color: green;
}
body .carousel-indicators{
bottom: -40px;
}
body .carousel-control-prev-icon,
body .carousel-control-next-icon{
background-color: rgb(54 56 54);
}

.carousel-control-prev,
.carousel-control-next{
top: auto;
bottom: auto;
padding-top: 222px;
padding:0;
margin:0;
}
.carousel-control-prev{margin-left:-25px;}
body .no-padding{
padding-left: 0;
padding-right: 0;
}





/* fade slider */
.slides {
    height:300px;
    margin:50px auto;
    overflow:hidden;
    position:relative;
    width:900px;
}
.slides ul {
    list-style:none;
    position:relative;
}
/* keyframes #anim_slides */
@-webkit-keyframes anim_slides {
    0% {
        opacity:0;
    }
    6% {
        opacity:1;
    }
    24% {
        opacity:1;
    }
    30% {
        opacity:0;
    }
    100% {
        opacity:0;
    }
}
@-moz-keyframes anim_slides {
    0% {
        opacity:0;
    }
    6% {
        opacity:1;
    }
    24% {
        opacity:1;
    }
    30% {
        opacity:0;
    }
    100% {
        opacity:0;
    }
}
.slides ul li {
    opacity:0;
    position:absolute;
    top:0;
    /* css3 animation */
    -webkit-animation-name: anim_slides;
    -webkit-animation-duration: 25.0s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: normal;
    -webkit-animation-delay: 0;
    -webkit-animation-play-state: running;
    -webkit-animation-fill-mode: forwards;
    -moz-animation-name: anim_slides;
    -moz-animation-duration: 5.0s;
    -moz-animation-timing-function: linear;
    -moz-animation-iteration-count: infinite;
    -moz-animation-direction: normal;
    -moz-animation-delay: 0;
    -moz-animation-play-state: running;
    -moz-animation-fill-mode: forwards;
}
/* css3 delays */
.slides ul  li:nth-child(2), .slides ul  li:nth-child(2) div {
    -webkit-animation-delay: 4.0s;
    -moz-animation-delay: 4.0s;
}
.slides ul  li:nth-child(3), .slides ul  li:nth-child(3) div {
    -webkit-animation-delay: 8.0s;
    -moz-animation-delay: 8.0s;
}
.slides ul  li:nth-child(4), .slides ul  li:nth-child(4) div {
    -webkit-animation-delay: 12.0s;
    -moz-animation-delay: 12.0s;
}
.slides ul li img {
    display:block;
}
/* keyframes #anim_titles */
@-webkit-keyframes anim_titles {
    0% {
        left:100%;
        opacity:0;
    }
    5% {
        left:10%;
        opacity:1;
    }
    20% {
        left:10%;
        opacity:1;
    }
    25% {
        left:100%;
        opacity:0;
        COLOR:rgb(146, 197, 5);
        BACKGROUND-COLOR:rgb(1, 65, 1);
        FONT-SIZE:1.5EM;
    }
    100% {
        left:100%;
        opacity:0;
    }
}
@-moz-keyframes anim_titles {
    0% {
        left:100%;
        opacity:0;
    }
    5% {
        left:10%;
        opacity:1;
    }
    20% {
        left:10%;
        opacity:1;
    }
    25% {
        left:100%;
        opacity:0;
    }
    100% {
        left:100%;
        opacity:0;
    }
}
.slides ul li div {
    background-color:#000000;
    border-radius:10px 10px 10px 10px;
    box-shadow:0 0 5px #FFFFFF inset;
    color:#FFFFFF;
    font-size:26px;
    left:10%;
    margin:0 auto;
    padding:20px;
    position:absolute;
    top:50%;
    width:200px;
    /* css3 animation */
    -webkit-animation-name: anim_titles;
    -webkit-animation-duration: 16.0s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-direction: normal;
    -webkit-animation-delay: 0;
    -webkit-animation-play-state: running;
    -webkit-animation-fill-mode: forwards;
    -moz-animation-name: anim_titles;
    -moz-animation-duration: 16.0s;
    -moz-animation-timing-function: linear;
    -moz-animation-iteration-count: infinite;
    -moz-animation-direction: normal;
    -moz-animation-delay: 0;
    -moz-animation-play-state: running;
    -moz-animation-fill-mode: forwards;
}

.megamenu {
  position: static;
}

.megamenu .dropdown-menu {
  background: none;
  border: none;
  width: 100%;
}
@media (max-width: 600px) {
  .product-card {
    flex: 1 46%;
  }


  #typed{font-size:1.2em; color:black;}
}




body {
    background-attachment:fixed;
  min-height: 100vh;
}

code {
  color: #745eb1;
  background: #fff;
  padding: 0.1rem 0.2rem;
  border-radius: 0.2rem;
}

.text-uppercase {
  letter-spacing: 0.08em;
}
.popover-body {

   color: #eb0d5f;
    margin-left: 2px;
    background-color: white;
    border: 2.5px solid #f6aec9;
    font-family:var(--font-1);
    font-weight:600;
}



@media only screen and (max-width:650px){
#fullimage{width:140%; margin-right:3px; margin-left:-3px;}

#fullcart{width:490px; height: 520px; border:10px solid black; }
#fullcarparent{width:670px; height: 450px; border:30px solid rgb(241, 2, 2);}
.col-md-3
{
display: inline-block;
margin-left:auto;
margin-right:auto;
}
.popover-body {
   color: #eb0d5f;
    margin-left: 2px;
    background-color: white;
    border: 2.5px solid #f6aec9;
    font-family:var(--font-1);
    font-weight:600;
}
#b__box{ background-color:black;width:23.23rem;}


}
.qv:hover{color:white; font-weight:900; }

.ac:hover{color:white;  font-weight:900; }


.carousel11{padding:5px;}

</style>
{% endblock %}


{% block ul %}

<li class="nav-item active m-auto">
    <a class="nav-link ml-2 mr-2" href="/shop" style=" color: white !important; margin:auto; font-family:var(--font-1);font-weight:600; border-radius:25px; padding:8px 16px; background: var(--gradient-primary); color:white; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3); text-decoration: none;">Home</a>
  </li>


  <li class="nav-item ml-2 mr-2">
    <a class="nav-link" href="/shop/about" style=" color: white !important; margin:auto; color: var(--primary); font-family:var(--font-1);font-weight:600; border-radius:20px; padding:8px 16px; text-decoration: none; transition: all 0.3s;">About</a>
  </li>

  <li class="nav-item ml-2 mr-2">
    <a class="nav-link" href="/shop/tracker" style=" color: white !important; margin:auto; color: var(--primary); font-family:var(--font-1);font-weight:600; border-radius:20px; padding:8px 16px; text-decoration: none; transition: all 0.3s;">Tracker</a>
  </li>

  <li class="nav-item ml-2 mr-2">
    <a class="nav-link" href="/blog" style=" color: white !important; margin:auto; color: var(--primary); font-family:var(--font-1);font-weight:600; border-radius:20px; padding:8px 16px; text-decoration: none; transition: all 0.3s;">Blog</a>
  </li>

  <li class="nav-item ml-2 mr-2">
    <a class="nav-link" href="/shop/contact" style=" color: white !important; margin:auto; color: var(--primary); font-family:var(--font-1);font-weight:600; border-radius:20px; padding:8px 16px; text-decoration: none; transition: all 0.3s;">Contact</a>
  </li>

  {% endblock %}





{% block body %}



<!-- Hero Section -->
<section class="hero-section position-relative text-white d-flex align-items-center" style="min-height: 85vh; background: linear-gradient(135deg, rgba(37, 99, 235, 0.9), rgba(30, 64, 175, 0.8)), url('/media/shop/images/hero.png'); background-size: cover; background-position: center; background-attachment: fixed;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-xl-8 col-lg-10 col-md-12">
        <div class="text-center hero-content py-5">
          <!-- Main Heading -->
          <h1 class="display-2 fw-bold mb-4" style="font-family: 'Inter', sans-serif; text-shadow: 2px 2px 8px rgba(0,0,0,0.4); line-height: 1.2; color:white; ">
            Welcome to <span id="typed" style="color: #fbbf24; text-shadow: 2px 2px 8px rgba(0,0,0,0.4); color:#df2ff2; font-weight:500;  ">ShopEase</span>
          </h1>
          
          <!-- Subtitle -->
          <p class="lead mb-5" style="font-size: 1.4rem; opacity: 0.95; font-family: 'Inter', sans-serif; font-weight: 500; max-width: 600px; margin: 0 auto; text-shadow: 1px 1px 3px rgba(0,0,0,0.3);">
            Discover amazing products at unbeatable prices with fast, reliable delivery
          </p>
          
          <!-- Search Form -->
          <div class="search-container mb-5">
            <form method="get" action="/shop/search" class="search-form">
              <div class="input-group mx-auto" style="max-width: 600px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
                <input 
                  type="text" 
                  id="search1" 
                  name="search1" 
                  class="form-control" 
                  placeholder="Search for amazing products..." 
                  style="
                    background-color: rgba(255,255,255,0.98); 
                    border-radius: 50px 0 0 50px; 
                    height: 60px; 
                    border: none; 
                    font-family: 'Inter', sans-serif; 
                    font-weight: 500; 
                    padding: 0 25px; 
                    font-size: 1.1rem; 
                    backdrop-filter: blur(10px);
                    color: #1f2937;
                  "
                >
                <button 
                  type="submit" 
                  class="btn" 
                  name="submit1" 
                  id="submit1" 
                  style="
                    background: rgba(255,255,255,0.25); 
                    backdrop-filter: blur(15px); 
                    color: white; 
                    border: none; 
                    padding: 0 25px; 
                    font-size: 1.1rem; 
                    border-radius: 0 50px 50px 0; 
                    font-family: 'Inter', sans-serif; 
                    font-weight: 600; 
                    transition: all 0.3s ease; 
                    display: flex; 
                    align-items: center; 
                    gap: 8px;
                    height: 60px;
                    margin-left: 15px; background: #c01ef7;color: black;
                  "
                >
                  <svg width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                  </svg>
                  <span class="d-none d-sm-inline" >Search</span>
                </button>
              </div>
            </form>
          </div>
          
          <!-- Category Badges -->
          <div class="hero-badges d-flex flex-wrap justify-content-center gap-3">
            <span class="badge px-3 py-2" style="background: rgba(255,255,255,0.2); color: white; font-size: 0.9rem; border-radius: 25px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3);">üì± Electronics</span>
            <span class="badge px-3 py-2" style="background: rgba(255,255,255,0.2); color: white; font-size: 0.9rem; border-radius: 25px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3);">üëï Fashion</span>
            <span class="badge px-3 py-2" style="background: rgba(255,255,255,0.2); color: white; font-size: 0.9rem; border-radius: 25px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3);">üè† Home & Garden</span>
            <span class="badge px-3 py-2" style="background: rgba(255,255,255,0.2); color: white; font-size: 0.9rem; border-radius: 25px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.3);">‚öΩ Sports</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>



     <div class="alert alert-success text-center py-4 mx-3" style="background: linear-gradient(135deg, #d84dee, #11bcb1); color: white; font-family: var(--font-1); font-weight: 600; margin: 40px auto; border-radius: 20px; box-shadow: 0 8px 25px rgba(16, 185, 129, 0.3); position: relative; overflow: hidden;">
        <div style="position: absolute; top: 0; left: -100%; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); animation: shimmer 3s infinite;"></div>
        <div style="position: relative; z-index: 2; display: flex; align-items: center; justify-content: center; gap: 20px; flex-wrap: wrap;">
            <span style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 1.2em;">üöö</span>
                FREE SHIPPING on orders above ‚Çπ499
            </span>
            <span style="opacity: 0.7;">|</span>
            <span style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 1.2em;">üìû</span>
                24/7 Customer Support
            </span>
            <span style="opacity: 0.7;">|</span>
            <span style="display: flex; align-items: center; gap: 8px;">
                <span style="font-size: 1.2em;">üîí</span>
                Secure Payment
            </span>
        </div>
    </div>

    <style>
    @keyframes shimmer {
        0% { left: -100%; }
        100% { left: 100%; }
    }
    </style>



    <!--Slideshow starts here -->


        {% for product, range, nSlides, count in allProds %}
      <h4 class="my-5 text-center" style="color: var(--dark); margin-left:2%; font-size:2em; font-family:var(--font-primary); font-weight:var(--font-weight-bold);">‚ú® Flash Sale On <span style="color:white; font-size:1.2em; margin:0 10px; background: var(--gradient-primary); padding:8px 20px; border-radius:25px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);">{{product.0.category.capitalize}}</span> 
      <span style="background: var(--gradient-success); color: white; padding: 4px 12px; border-radius: 15px; font-size: 0.8em; margin-left: 10px; box-shadow: 0 2px 8px rgba(5, 150, 105, 0.3);">{{count}} Items</span></h4>
    <div class="container-fluid px-4" data-aos="flip-right">
        <div id="demo{{forloop.counter}}" class="carousel slide my-4" data-ride="carousel">
            <ul class="carousel-indicators">
                <li data-target="#demo{{forloop.counter}}" data-slide-to="0" class="active"></li>
                {% for i in range %}
                <li data-target="#demo{{forloop.parentloop.counter}}" data-slide-to="{{i}}"></li>
                {% endfor %}
            </ul>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <div class="row justify-content-center">
                    {% for i in product %}
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-4" >
                        <div class="card h-100 product-card" style="border:none; background-color:#ffffff; border-radius:20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); transition: all 0.3s; overflow: hidden; transform-origin: center;">
                            <div style="position: relative; overflow: hidden;">
                                <img src='/media/{{i.image}}' class="card-img-top" style="width:100%; height:220px; object-fit:cover; border-radius:20px 20px 0 0; transition: all 0.3s;" alt="{{i.product_name}}">
                                <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.9); backdrop-filter: blur(10px); border-radius: 50%; width: 40px; height: 40px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(0,0,0,0.1);">
                                    <span style="color: #ef4444; font-size: 1.2em;">‚ô°</span>
                                </div>
                                <div style="position: absolute; top: 10px; left: 10px; background: linear-gradient(135deg, #ef4444, #dc2626); color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.75em; font-weight: 600; box-shadow: 0 2px 8px rgba(239,68,68,0.3);">
                                    SALE
                                </div>
                            </div>
                            <div class="card-body" style="padding: 20px;">

                <!-- Star Rating -->
                <div style="display: flex; justify-content: center; margin-bottom: 10px;">
                    <div style="display: flex; gap: 2px;">
                        <span style="color: #fbbf24; font-size: 1.1em;">‚òÖ</span>
                        <span style="color: #fbbf24; font-size: 1.1em;">‚òÖ</span>
                        <span style="color: #fbbf24; font-size: 1.1em;">‚òÖ</span>
                        <span style="color: #fbbf24; font-size: 1.1em;">‚òÖ</span>
                        <span style="color: #e5e7eb; font-size: 1.1em;">‚òÖ</span>
                        <span style="color: #6b7280; font-size: 0.85em; margin-left: 8px; font-family: var(--font-1);">(4.2)</span>
                    </div>
                </div>
                
                <!-- Price Section -->
                <div style="text-align: center; margin-bottom: 15px;">
                    <div style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                        <span id="pricepr{{i.id}}" style="font-size: 1.8em; font-weight: 800; color: var(--primary); font-family: var(--font-1);">‚Çπ{{i.price}}</span>
                        <span style="font-size: 1.1em; color: #9ca3af; text-decoration: line-through; font-family: var(--font-1);">‚Çπ{{i.price|add:500}}</span>
                    </div>
                    <div style="background: linear-gradient(135deg, #10b981, #059669); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75em; font-weight: 600; display: inline-block; margin-top: 5px;">
                        SAVE ‚Çπ500
                    </div>
                </div>



                                <h5 class="card-title" id="namepr{{i.id}}" style="color: var(--dark); font-weight: 600; font-size:1.2em; font-family: var(--font-1); text-align:center; margin-bottom:15px; line-height: 1.4;">{{i.product_name.capitalize}}</h5>
                              <!--  <p class="card-text" style="color:rgb(185 145 34);  text-align:center; margin-bottom:6px; font-family:var(--font-1); font-weight:700;  ">{{i.desc|slice:"0:33"}}...</p>-->
                               <!--<h6 class="card-title" style="color:rgb(245, 6, 117) ; margin-bottom: 0.4rem;" >Price : <span id="pricepr{{i.id}}" style="font-size:1.5em; font-weight:650; color:rgb(245, 6, 117); margin-top:-2px; margin-bottom: 4px;">{{i.price}}</span></h6> -->
                    <div style="display: flex; flex-direction: column; gap: 10px; margin-top: 15px;">
                         <span id="divpr{{i.id}}" class="divpr" style="width: 100%;">
                                    <button id="pr{{i.id}}" class="btn btn cart ac" style="width: 100%; background: var(--gradient-primary); color: white; border: none; border-radius: 25px; padding: 12px 20px; font-family: var(--font-1); font-weight: 600; box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3); transition: all 0.3s; position: relative; overflow: hidden;">
                                        <span style="position: relative; z-index: 2; display: flex; align-items: center; justify-content: center; gap: 8px;">
                                            <span style="font-size: 1.1em;">üõí</span>
                                            Add To Cart
                                        </span>
                                    </button>
                         </span>
                                <a href="/shop/products/{{i.id}}" style="width: 100%; text-decoration: none;">
                                    <button id="qv{{i.id}}" class="btn btn-outline-primary cart qv" style="width: 100%; color: var(--primary); background-color: rgba(59, 130, 246, 0.05); border: 2px solid var(--primary); border-radius: 25px; padding: 12px 20px; font-family: var(--font-1); font-weight: 600; transition: all 0.3s; position: relative; overflow: hidden;">
                                        <span style="display: flex; align-items: center; justify-content: center; gap: 8px;">
                                            <span style="font-size: 1.1em;">üëÅÔ∏è</span>
                                            Quick View
                                        </span>
                                    </button>
                                </a>
                    </div>
                            </div>
                        </div>
                    </div>
                    {% if forloop.counter|divisibleby:4 and forloop.counter > 0 and not forloop.last %}
                    </div>
                </div>
                <div class="carousel-item">
                    <div class="row justify-content-center">
                    {% endif %}
                    {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <!-- Modern carousel controls -->
        <a class="carousel-control-prev" href="#demo{{forloop.counter}}" data-slide="prev" style="width: 5%; left: -2%;">
            <div style="background: var(--gradient-primary); width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); transition: all 0.3s;">
                <span style="color: white; font-size: 1.5em; font-weight: bold;">‚Äπ</span>
            </div>
        </a>
        <a class="carousel-control-next" href="#demo{{forloop.counter}}" data-slide="next" style="width: 5%; right: -2%;">
            <div style="background: var(--gradient-primary); width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); transition: all 0.3s;">
                <span style="color: white; font-size: 1.5em; font-weight: bold;">‚Ä∫</span>
            </div>
        </a>
    </div>

    {% endfor %}











{% endblock %}
{% block js %}


<script type="text/javaScript">


if (localStorage.getItem('cart') == null) {
    var cart = {};
} else {
    cart = JSON.parse(localStorage.getItem('cart'));
    updateCart(cart);
}
// If the add to cart button is clicked, add/increment the item
//$('.cart').click(function() {
$('.divpr').on('click', 'button.cart', function() {
    var idstr = this.id.toString();
    if (cart[idstr] != undefined) {
        qty = cart[idstr][0] + 1;

    } else {
        qty = 1;
        name = document.getElementById('namepr'+idstr.slice(2)).innerHTML
        cart[idstr] = [qty, name];

    }
    updateCart(cart);
    // Force update popover immediately
    $('#popcart').popover('dispose');
    updatePopover(cart);
    $('#popcart').popover('show');
});
//Add Popover to cart
$('#popcart').popover();
updatePopover(cart);

function updatePopover(cart) {
    console.log('We are inside updatePopover');
    var popStr = "";
    var totalItems = 0;
    var totalPrice = 0;
    
    // Header with modern styling
    popStr = popStr + "<div style='background: linear-gradient(135deg, #f8fafc, #e2e8f0); padding: 15px; margin: -12px -12px 15px -12px; border-radius: 12px 12px 0 0;'>";
    popStr = popStr + "<h5 style='font-family: var(--font-1); font-weight: 700; color: var(--dark); margin: 0; display: flex; align-items: center;'>";
    popStr = popStr + "<span style='background: var(--gradient-primary); color: white; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin-right: 10px; font-size: 0.9em;'>üõí</span>";
    popStr = popStr + "Shopping Cart</h5></div>";
    
    if (Object.keys(cart).length === 0) {
        popStr = popStr + "<div style='text-align: center; padding: 20px; color: #6b7280;'>";
        popStr = popStr + "<div style='font-size: 3em; margin-bottom: 10px;'>üõí</div>";
        popStr = popStr + "<p style='font-family: var(--font-1); margin: 0;'>Your cart is empty</p>";
        popStr = popStr + "<small style='color: #9ca3af;'>Add some products to get started!</small>";
        popStr = popStr + "</div>";
    } else {
        // Cart items with modern card design
        popStr = popStr + "<div style='max-height: 300px; overflow-y: auto; margin-bottom: 15px;'>";
        var i = 1;
        for (var item in cart) {
            var itemName = document.getElementById('namepr' + item.slice(2)).innerHTML;
            var itemPrice = document.getElementById('pricepr' + item.slice(2)).innerHTML.replace('‚Çπ', '');
            var quantity = cart[item][0];
            var itemTotal = parseInt(itemPrice) * quantity;
            
            totalItems += quantity;
            totalPrice += itemTotal;
            
            popStr = popStr + "<div style='background: white; border-radius: 10px; padding: 12px; margin-bottom: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); border-left: 4px solid var(--primary);'>";
            popStr = popStr + "<div style='display: flex; justify-content: space-between; align-items: center;'>";
            popStr = popStr + "<div style='flex: 1;'>";
            popStr = popStr + "<h6 style='margin: 0; font-family: var(--font-1); font-weight: 600; color: var(--dark); font-size: 0.9em;'>" + itemName.slice(0, 25) + (itemName.length > 25 ? '...' : '') + "</h6>";
            popStr = popStr + "<div style='display: flex; align-items: center; margin-top: 5px;'>";
            popStr = popStr + "<span style='background: var(--gradient-primary); color: white; padding: 2px 8px; border-radius: 12px; font-size: 0.75em; font-weight: 600; margin-right: 8px;'>Qty: " + quantity + "</span>";
            popStr = popStr + "<span style='color: var(--primary); font-weight: 700; font-size: 0.9em;'>‚Çπ" + itemTotal + "</span>";
            popStr = popStr + "</div></div>";
            popStr = popStr + "<div style='color: #6b7280; font-size: 0.8em; margin-left: 10px;'>‚Çπ" + itemPrice + " each</div>";
            popStr = popStr + "</div></div>";
            i = i + 1;
        }
        popStr = popStr + "</div>";
        
        // Total section with modern styling
        popStr = popStr + "<div style='background: linear-gradient(135deg, #f0f9ff, #e0f2fe); padding: 15px; border-radius: 10px; margin-bottom: 15px; border: 1px solid #bae6fd;'>";
        popStr = popStr + "<div style='display: flex; justify-content: space-between; align-items: center;'>";
        popStr = popStr + "<div style='font-family: var(--font-1); font-weight: 600; color: var(--dark);'>Total Items: <span style='color: var(--primary);'>" + totalItems + "</span></div>";
        popStr = popStr + "<div style='font-family: var(--font-1); font-weight: 700; font-size: 1.2em; color: var(--primary);'>‚Çπ" + totalPrice + "</div>";
        popStr = popStr + "</div></div>";
    }
    
    // Action buttons with improved styling
    popStr = popStr + "<div style='display: flex; gap: 10px; margin-top: 15px;'>";
    if (Object.keys(cart).length > 0) {
        popStr = popStr + "<a href='/shop/checkout' style='flex: 1; text-decoration: none;'>";
        popStr = popStr + "<button class='btn btn-primary' style='width: 100%; background: var(--gradient-primary); border: none; color: white; font-family: var(--font-1); font-weight: 600; border-radius: 25px; padding: 12px 20px; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); transition: all 0.3s;' id='checkout'>";
        popStr = popStr + "<span style='margin-right: 8px;'>üöÄ</span>Checkout Now</button></a>";
        popStr = popStr + "<button class='btn btn-outline-danger' onclick='clearCart()' id='clearCart' style='border: 2px solid var(--danger); color: var(--danger); background: transparent; font-family: var(--font-1); font-weight: 600; border-radius: 25px; padding: 12px 16px; transition: all 0.3s;' title='Clear Cart'>";
        popStr = popStr + "üóëÔ∏è</button>";
    }
    popStr = popStr + "</div>";
    
    console.log(popStr);
    document.getElementById('popcart').setAttribute('data-content', popStr);
    $('#popcart').popover('show');
}


function clearCart() {
    cart = JSON.parse(localStorage.getItem('cart'));
    for (var item in cart) {
        document.getElementById('div' + item).innerHTML = '<button id="' + item + '" class="btn btn-primary cart">Add To Cart</button>'
    }
    localStorage.clear();
    cart = {};
    updateCart(cart);
}

function updateCart(cart) {
    var sum = 0;
    for (var item in cart) {
        sum = sum + cart[item][0];
        document.getElementById('div' + item).innerHTML = "<div style='display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #f8fafc, #e2e8f0); border-radius: 25px; padding: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);'><button id='minus" + item + "' class='btn minus' style='background: linear-gradient(135deg, #ef4444, #dc2626); color:white; font-weight:600; border:none; border-radius:50%; width:32px; height:32px; display: flex; align-items: center; justify-content: center; font-size: 1.2em; line-height: 1; box-shadow: 0 2px 4px rgba(239,68,68,0.3); transition: all 0.2s;'>‚àí</button> <div style='background: white; border-radius: 15px; padding: 6px 16px; margin: 0 8px; box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);'><span id='val" + item + "' style='font-weight:700; color: var(--primary); font-size:1.1em; font-family: var(--font-1);'>" + cart[item][0] + "</span></div> <button id='plus" + item + "' class='btn plus' style='background: linear-gradient(135deg, #10b981, #059669); border:none; border-radius:50%; width:32px; height:32px; color:white; font-weight:600; display: flex; align-items: center; justify-content: center; font-size: 1.2em; line-height: 1; box-shadow: 0 2px 4px rgba(16,185,129,0.3); transition: all 0.2s;'>+</button></div>";
    }
    localStorage.setItem('cart', JSON.stringify(cart));
    document.getElementById('cart').innerHTML = sum;
    console.log(cart);
    updatePopover(cart);
}
// If plus or minus button is clicked, change the cart as well as the display value
$('.divpr').on("click", "button.minus", function() {
    a = this.id.slice(7, );
    cart['pr' + a][0] = cart['pr' + a][0] - 1;
    cart['pr' + a][0] = Math.max(0, cart['pr' + a][0]);
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    updateCart(cart);
});
$('.divpr').on("click", "button.plus", function() {
    a = this.id.slice(6, );
    cart['pr' + a][0] = cart['pr' + a][0] + 1;
    document.getElementById('valpr' + a).innerHTML = cart['pr' + a][0];
    updateCart(cart);
});



// Auto-hide popover on load
setTimeout(function() {
    $('#popcart').popover('hide');
}, 100);




</script>


<script>
  window.onload = function () {

      var typed = new Typed('#typed', {
          strings: ["Welcome to Your Shop", "Tranding Clothes", "Best Watches", "Amazing Shoes", "Low Cost Avalaible", "Luxury Items For Men"],
          backSpeed: 15,
          smartBackspace: true,
          backDelay: 1200,
          startDelay: 1000,
          typeSpeed: 25,
          loop: true,
      });
  };



  function hide_popovers(){
    x=document.getElementById('popcart')
    click=x.click()
    click2=x.click()
    }


</script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/typed.js/2.0.9/typed.min.js" async defer></script>



<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.7.0/gsap.min.js" ></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>



{% endblock %}
